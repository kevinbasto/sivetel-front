<div class="cards-container">
  <mat-card>
    <mat-card-title> Recargas y Pines </mat-card-title>
    <mat-card-subtitle> Balance de recargas y pines </mat-card-subtitle>
    <mat-card-content class="content">
      @if(balance){
      <h2>
        {{ balance.rechargeBalance | currency }}
      </h2>
      } @else {
      <mat-spinner [diameter]="70"></mat-spinner>
      }
    </mat-card-content>
  </mat-card>
  <mat-card>
    <mat-card-title> Servicios </mat-card-title>
    <mat-card-subtitle> balance para venta de servicios </mat-card-subtitle>
    <mat-card-content class="content">
      @if(balance){
      <h2>
        {{ balance.servicesBalance | currency }}
      </h2>
      } @else {
      <mat-spinner [diameter]="70"></mat-spinner>
      }
    </mat-card-content>
  </mat-card>
</div>
<div class="table-header">
    <h1>
        Mi historial de ventas
    </h1>
    <span>
        Historial del: {{firstDay | date: 'dd/MM/yyyy'}} al {{lastDay | date: 'dd/MM/yyyy'}}
    </span>
</div>
<div class="table-container">
  <table mat-table [dataSource]="generalSales" class="mat-elevation-z8">
    
    <ng-container matColumnDef="transactionId">
      <th mat-header-cell *matHeaderCellDef>Transacción</th>
      <td mat-cell *matCellDef="let element">{{ element.transactionId }}</td>
    </ng-container>

    <ng-container matColumnDef="amount">
      <th mat-header-cell *matHeaderCellDef>Cantidad</th>
      <td mat-cell *matCellDef="let element">{{ element.amount }}</td>
    </ng-container>

    <ng-container matColumnDef="date">
      <th mat-header-cell *matHeaderCellDef>Fecha de la recarga</th>
      <td mat-cell *matCellDef="let element">{{ element.date | date: 'hh:mm dd/MMyyyy' }}</td>
    </ng-container>

    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef>Tipo de venta</th>
      <td mat-cell *matCellDef="let element">
        @switch (element.type) {
            @case ('recharge') {
                <p class="status-button recharge">
                    Recarga telefónica
                </p>
            }
            @case ('pin') {
                <p class="status-button pin">
                    Venta de pin
                </p>
            }
            @case ('service') {
                <p class="status-button service" >
                    Pago de servicio
                </p>
            }
        }
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>
<p style="font-weight: bold; font-size: 1.5rem; margin: 0;">
    Total de ventas: {{count}} ventas
</p>
<p>
    * Los datos mostrados corresponden al mes en curso.
</p>